{"version":3,"sources":["webpack:///./node_modules/vue-virtual-scroll-list/dist/index.js","webpack:///./node_modules/babel-runtime/core-js/get-iterator.js","webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///src/components/Im/Dialog.vue","webpack:///./src/components/Im/Dialog.vue?23e1","webpack:///./src/components/Im/Dialog.vue","webpack:///src/components/Im/ChatMessage.vue","webpack:///./src/components/Im/ChatMessage.vue?f9e2","webpack:///./src/components/Im/ChatMessage.vue","webpack:///src/components/Im/Chat.vue","webpack:///./src/components/Im/Chat.vue?0865","webpack:///./src/components/Im/Chat.vue","webpack:///src/pages/User/Im.vue","webpack:///./src/pages/User/Im.vue?d7e4","webpack:///./src/pages/User/Im.vue"],"names":["factory","Vue","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","prototype","hasOwnProperty","call","DIRECTION_TYPE","CALC_TYPE","Virtual","param","callUpdate","instance","Constructor","TypeError","_classCallCheck","this","init","protoProps","staticProps","value","sizes","Map","firstRangeTotalSize","firstRangeAverageSize","lastCalcIndex","fixedSizeValue","calcType","offset","direction","range","create","checkRange","keeps","start","end","padFront","padBehind","getIndexOffset","id","size","set","Math","round","isFront","isBehind","max","updateRange","getEndByStart","handleDataSourcesChange","handleFront","handleBehind","overs","getScrollOvers","buffer","slotHeaderSize","isFixedType","floor","low","middle","middleOffset","high","uniqueIds","givenIndex","index","get","getEstimateSize","min","getLastIndex","getPadFront","getPadBehind","getRange","theoryEnd","lastIndex","VirtualProps","type","Number","required","dataKey","String","dataSources","Array","dataComponent","Function","extraProps","rootTag","default","wrapTag","wrapClass","topThreshold","bottomThreshold","itemTag","itemClass","itemClassAdd","headerTag","headerClass","footerTag","footerClass","disabled","Boolean","ItemProps","event","tag","horizontal","source","component","uniqueKey","SlotProps","Wrapper","created","shapeKey","mounted","_this","ResizeObserver","resizeObserver","dispatchSizeChange","observe","$el","updated","beforeDestroy","disconnect","methods","getCurrentSize","$parent","$emit","hasInitial","Item","mixins","render","h","_this$extraProps","role","Slot","attrs","$slots","EVENT_TYPE","SLOT_TYPE","data","watch","dataSources.length","virtual","updateParam","getUniqueIdFromDataSources","newValue","scrollToIndex","scrollToOffset","isHorizontal","directionKey","installVirtual","$on","onItemResized","header","footer","onSlotResized","activated","destroy","getSize","getSizes","root","$refs","scrollToBottom","getOffset","shepherd","scrollIntoView","setTimeout","getClientSize","getScrollSize","reset","slotFooterSize","onRangeChanged","_this2","map","dataSource","ceil","saveSize","hasInit","handleSlotSizeChange","onScroll","evt","clientSize","scrollSize","handleScroll","emitEvent","getRenderSlots","slots","_this$range","push","class","concat","console","warn","_this$$slots","_this$range2","padding","ref","on","&scroll","style","module","exports","__webpack_require__","__esModule","anObject","getIterator","it","iterFn","Dialog","name","active","online","me","info","computed","statusText","$t","moment_default","recipient_id","last_online_time","fromNow","log","last_message","i18n","messages","en","was","ru","Im_Dialog","_vm","_h","$createElement","_c","_self","staticClass","to","params","src","photo","alt","first_name","_v","_s","last_name","_e","message_text","_f","time","staticRenderFns","components_Im_Dialog","normalizeComponent","ssrContext","ChatMessage","Im_ChatMessage","date","sendByMe","components_Im_ChatMessage","ChatMessage_normalizeComponent","makeHeader","msgDate","sid","stubDate","Chat","components","VirtualList","a","mes","itemComponent","isUserViewHistory","fetching","follow","setVirtualListToBottom","messagesGrouped","groups","headerDate","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","msg","format","err","return","extends_default","vuex_esm","onSubmitMessage","postMessage","onScrollToTop","asyncToGenerator_default","regenerator_default","mark","_callee","oldest","wrap","_context","prev","vsl","isHistoryEndReached","loadOlderMessages","setVirtualListToOffset","$nextTick","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","groupedMsg","stop","onScrollToBottom","nomore","placeholder","Im_Chat","data-key","data-sources","data-component","wrap-class","root-tag","totop","$event","tobottom","directives","rawName","expression","slot","action","submit","preventDefault","domProps","input","composing","Im","ImDialog","ImChat","Chat_normalizeComponent","isLoading","intervalForMessages","total","isLoad","countPush","unread","checkOnlineUser","diff","clickOnDialog","dialogId","$router","query","getActiveDialog","selectDialogByRoute","route","vm","switchDialog","userId","createDialogWithUser","getDialogs","apiLoadAllDialogs","then","resp","loadDialogs","beforeRouteEnter","from","_ref","_callee2","_context2","_x","apply","arguments","beforeRouteUpdate","closeDialog","User_Im","_l","dialog","unread_count","nativeOn","click","getMessages","Im_Component","Im_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/3.623eda51cb2da1f7a839.js","sourcesContent":["/*!\n * vue-virtual-scroll-list v2.1.3\n * open source under the MIT license\n * https://github.com/tangbc/vue-virtual-scroll-list#readme\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('vue')) :\n  typeof define === 'function' && define.amd ? define(['vue'], factory) :\n  (global = global || self, global.VirtualList = factory(global.Vue));\n}(this, (function (Vue) { 'use strict';\n\n  Vue = Vue && Object.prototype.hasOwnProperty.call(Vue, 'default') ? Vue['default'] : Vue;\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  /**\n   * virtual list core calculating center\n   */\n  var DIRECTION_TYPE = {\n    FRONT: 'FRONT',\n    // scroll up or left\n    BEHIND: 'BEHIND' // scroll down or right\n\n  };\n  var CALC_TYPE = {\n    INIT: 'INIT',\n    FIXED: 'FIXED',\n    DYNAMIC: 'DYNAMIC'\n  };\n  var LEADING_BUFFER = 2;\n\n  var Virtual = /*#__PURE__*/function () {\n    function Virtual(param, callUpdate) {\n      _classCallCheck(this, Virtual);\n\n      this.init(param, callUpdate);\n    }\n\n    _createClass(Virtual, [{\n      key: \"init\",\n      value: function init(param, callUpdate) {\n        // param data\n        this.param = param;\n        this.callUpdate = callUpdate; // size data\n\n        this.sizes = new Map();\n        this.firstRangeTotalSize = 0;\n        this.firstRangeAverageSize = 0;\n        this.lastCalcIndex = 0;\n        this.fixedSizeValue = 0;\n        this.calcType = CALC_TYPE.INIT; // scroll data\n\n        this.offset = 0;\n        this.direction = ''; // range data\n\n        this.range = Object.create(null);\n\n        if (param) {\n          this.checkRange(0, param.keeps - 1);\n        } // benchmark test data\n        // this.__bsearchCalls = 0\n        // this.__getIndexOffsetCalls = 0\n\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.init(null, null);\n      } // return current render range\n\n    }, {\n      key: \"getRange\",\n      value: function getRange() {\n        var range = Object.create(null);\n        range.start = this.range.start;\n        range.end = this.range.end;\n        range.padFront = this.range.padFront;\n        range.padBehind = this.range.padBehind;\n        return range;\n      }\n    }, {\n      key: \"isBehind\",\n      value: function isBehind() {\n        return this.direction === DIRECTION_TYPE.BEHIND;\n      }\n    }, {\n      key: \"isFront\",\n      value: function isFront() {\n        return this.direction === DIRECTION_TYPE.FRONT;\n      } // return start index offset\n\n    }, {\n      key: \"getOffset\",\n      value: function getOffset(start) {\n        return start < 1 ? 0 : this.getIndexOffset(start);\n      }\n    }, {\n      key: \"updateParam\",\n      value: function updateParam(key, value) {\n        if (this.param && key in this.param) {\n          this.param[key] = value;\n        }\n      } // save each size map by id\n\n    }, {\n      key: \"saveSize\",\n      value: function saveSize(id, size) {\n        this.sizes.set(id, size); // we assume size type is fixed at the beginning and remember first size value\n        // if there is no size value different from this at next comming saving\n        // we think it's a fixed size list, otherwise is dynamic size list\n\n        if (this.calcType === CALC_TYPE.INIT) {\n          this.fixedSizeValue = size;\n          this.calcType = CALC_TYPE.FIXED;\n        } else if (this.calcType === CALC_TYPE.FIXED && this.fixedSizeValue !== size) {\n          this.calcType = CALC_TYPE.DYNAMIC; // it's no use at all\n\n          delete this.fixedSizeValue;\n        } // calculate the average size only in the first range\n\n\n        if (this.sizes.size <= this.param.keeps) {\n          this.firstRangeTotalSize = this.firstRangeTotalSize + size;\n          this.firstRangeAverageSize = Math.round(this.firstRangeTotalSize / this.sizes.size);\n        } else {\n          // it's done using\n          delete this.firstRangeTotalSize;\n        }\n      } // in some special situation (e.g. length change) we need to update in a row\n      // try goiong to render next range by a leading buffer according to current direction\n\n    }, {\n      key: \"handleDataSourcesChange\",\n      value: function handleDataSourcesChange() {\n        var start = this.range.start;\n\n        if (this.isFront()) {\n          start = start - LEADING_BUFFER;\n        } else if (this.isBehind()) {\n          start = start + LEADING_BUFFER;\n        }\n\n        start = Math.max(start, 0);\n        this.updateRange(this.range.start, this.getEndByStart(start));\n      } // when slot size change, we also need force update\n\n    }, {\n      key: \"handleSlotSizeChange\",\n      value: function handleSlotSizeChange() {\n        this.handleDataSourcesChange();\n      } // calculating range on scroll\n\n    }, {\n      key: \"handleScroll\",\n      value: function handleScroll(offset) {\n        this.direction = offset < this.offset ? DIRECTION_TYPE.FRONT : DIRECTION_TYPE.BEHIND;\n        this.offset = offset;\n\n        if (this.direction === DIRECTION_TYPE.FRONT) {\n          this.handleFront();\n        } else if (this.direction === DIRECTION_TYPE.BEHIND) {\n          this.handleBehind();\n        }\n      } // ----------- public method end -----------\n\n    }, {\n      key: \"handleFront\",\n      value: function handleFront() {\n        var overs = this.getScrollOvers(); // should not change range if start doesn't exceed overs\n\n        if (overs > this.range.start) {\n          return;\n        } // move up start by a buffer length, and make sure its safety\n\n\n        var start = Math.max(overs - this.param.buffer, 0);\n        this.checkRange(start, this.getEndByStart(start));\n      }\n    }, {\n      key: \"handleBehind\",\n      value: function handleBehind() {\n        var overs = this.getScrollOvers(); // range should not change if scroll overs within buffer\n\n        if (overs < this.range.start + this.param.buffer) {\n          return;\n        }\n\n        this.checkRange(overs, this.getEndByStart(overs));\n      } // return the pass overs according to current scroll offset\n\n    }, {\n      key: \"getScrollOvers\",\n      value: function getScrollOvers() {\n        // if slot header exist, we need subtract its size\n        var offset = this.offset - this.param.slotHeaderSize;\n\n        if (offset <= 0) {\n          return 0;\n        } // if is fixed type, that can be easily\n\n\n        if (this.isFixedType()) {\n          return Math.floor(offset / this.fixedSizeValue);\n        }\n\n        var low = 0;\n        var middle = 0;\n        var middleOffset = 0;\n        var high = this.param.uniqueIds.length;\n\n        while (low <= high) {\n          // this.__bsearchCalls++\n          middle = low + Math.floor((high - low) / 2);\n          middleOffset = this.getIndexOffset(middle);\n\n          if (middleOffset === offset) {\n            return middle;\n          } else if (middleOffset < offset) {\n            low = middle + 1;\n          } else if (middleOffset > offset) {\n            high = middle - 1;\n          }\n        }\n\n        return low > 0 ? --low : 0;\n      } // return a scroll offset from given index, can efficiency be improved more here?\n      // although the call frequency is very high, its only a superposition of numbers\n\n    }, {\n      key: \"getIndexOffset\",\n      value: function getIndexOffset(givenIndex) {\n        // we know this.\n        if (!givenIndex) {\n          return 0;\n        }\n\n        var offset = 0;\n        var indexSize = 0;\n\n        for (var index = 0; index < givenIndex; index++) {\n          // this.__getIndexOffsetCalls++\n          indexSize = this.sizes.get(this.param.uniqueIds[index]);\n          offset = offset + (indexSize || this.getEstimateSize());\n        } // remember last calculate index\n\n\n        this.lastCalcIndex = Math.max(this.lastCalcIndex, givenIndex - 1);\n        this.lastCalcIndex = Math.min(this.lastCalcIndex, this.getLastIndex());\n        return offset;\n      } // is fixed size type\n\n    }, {\n      key: \"isFixedType\",\n      value: function isFixedType() {\n        return this.calcType === CALC_TYPE.FIXED;\n      } // return the real last index\n\n    }, {\n      key: \"getLastIndex\",\n      value: function getLastIndex() {\n        return this.param.uniqueIds.length - 1;\n      } // in some conditions range is broke, we need correct it\n      // and then decide whether need update to next range\n\n    }, {\n      key: \"checkRange\",\n      value: function checkRange(start, end) {\n        var keeps = this.param.keeps;\n        var total = this.param.uniqueIds.length; // datas less than keeps, render all\n\n        if (total <= keeps) {\n          start = 0;\n          end = this.getLastIndex();\n        } else if (end - start < keeps - 1) {\n          // if range length is less than keeps, corrent it base on end\n          start = end - keeps + 1;\n        }\n\n        if (this.range.start !== start) {\n          this.updateRange(start, end);\n        }\n      } // setting to a new range and rerender\n\n    }, {\n      key: \"updateRange\",\n      value: function updateRange(start, end) {\n        this.range.start = start;\n        this.range.end = end;\n        this.range.padFront = this.getPadFront();\n        this.range.padBehind = this.getPadBehind();\n        this.callUpdate(this.getRange());\n      } // return end base on start\n\n    }, {\n      key: \"getEndByStart\",\n      value: function getEndByStart(start) {\n        var theoryEnd = start + this.param.keeps - 1;\n        var truelyEnd = Math.min(theoryEnd, this.getLastIndex());\n        return truelyEnd;\n      } // return total front offset\n\n    }, {\n      key: \"getPadFront\",\n      value: function getPadFront() {\n        if (this.isFixedType()) {\n          return this.fixedSizeValue * this.range.start;\n        } else {\n          return this.getIndexOffset(this.range.start);\n        }\n      } // return total behind offset\n\n    }, {\n      key: \"getPadBehind\",\n      value: function getPadBehind() {\n        var end = this.range.end;\n        var lastIndex = this.getLastIndex();\n\n        if (this.isFixedType()) {\n          return (lastIndex - end) * this.fixedSizeValue;\n        } // if it's all calculated, return the exactly offset\n\n\n        if (this.lastCalcIndex === lastIndex) {\n          return this.getIndexOffset(lastIndex) - this.getIndexOffset(end);\n        } else {\n          // if not, use a estimated value\n          return (lastIndex - end) * this.getEstimateSize();\n        }\n      } // get the item estimate size\n\n    }, {\n      key: \"getEstimateSize\",\n      value: function getEstimateSize() {\n        return this.firstRangeAverageSize || this.param.size;\n      }\n    }]);\n\n    return Virtual;\n  }();\n\n  /**\n   * props declaration for default, item and slot component\n   */\n  var VirtualProps = {\n    size: {\n      type: Number,\n      required: true\n    },\n    keeps: {\n      type: Number,\n      required: true\n    },\n    dataKey: {\n      type: String,\n      required: true\n    },\n    dataSources: {\n      type: Array,\n      required: true\n    },\n    dataComponent: {\n      type: [Object, Function],\n      required: true\n    },\n    extraProps: {\n      type: Object\n    },\n    rootTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    wrapTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    wrapClass: {\n      type: String,\n      \"default\": ''\n    },\n    direction: {\n      type: String,\n      \"default\": 'vertical' // the other value is horizontal\n\n    },\n    topThreshold: {\n      type: Number,\n      \"default\": 0\n    },\n    bottomThreshold: {\n      type: Number,\n      \"default\": 0\n    },\n    start: {\n      type: Number,\n      \"default\": 0\n    },\n    offset: {\n      type: Number,\n      \"default\": 0\n    },\n    itemTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    itemClass: {\n      type: String,\n      \"default\": ''\n    },\n    itemClassAdd: {\n      type: Function\n    },\n    headerTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    headerClass: {\n      type: String,\n      \"default\": ''\n    },\n    footerTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    footerClass: {\n      type: String,\n      \"default\": ''\n    },\n    disabled: {\n      type: Boolean,\n      \"default\": false\n    }\n  };\n  var ItemProps = {\n    index: {\n      type: Number\n    },\n    event: {\n      type: String\n    },\n    tag: {\n      type: String\n    },\n    horizontal: {\n      type: Boolean\n    },\n    source: {\n      type: Object\n    },\n    component: {\n      type: [Object, Function]\n    },\n    uniqueKey: {\n      type: String\n    },\n    extraProps: {\n      type: Object\n    }\n  };\n  var SlotProps = {\n    event: {\n      type: String\n    },\n    uniqueKey: {\n      type: String\n    },\n    tag: {\n      type: String\n    },\n    horizontal: {\n      type: Boolean\n    }\n  };\n\n  /**\n   * item and slot component both use similar wrapper\n   * we need to know their size change at any time\n   */\n  var Wrapper = {\n    created: function created() {\n      this.shapeKey = this.horizontal ? 'offsetWidth' : 'offsetHeight';\n    },\n    mounted: function mounted() {\n      var _this = this;\n\n      if (typeof ResizeObserver !== 'undefined') {\n        this.resizeObserver = new ResizeObserver(function () {\n          _this.dispatchSizeChange();\n        });\n        this.resizeObserver.observe(this.$el);\n      }\n    },\n    // since componet will be reused, so disptach when updated\n    updated: function updated() {\n      this.dispatchSizeChange();\n    },\n    beforeDestroy: function beforeDestroy() {\n      if (this.resizeObserver) {\n        this.resizeObserver.disconnect();\n        this.resizeObserver = null;\n      }\n    },\n    methods: {\n      getCurrentSize: function getCurrentSize() {\n        return this.$el ? this.$el[this.shapeKey] : 0;\n      },\n      // tell parent current size identify by unqiue key\n      dispatchSizeChange: function dispatchSizeChange() {\n        this.$parent.$emit(this.event, this.uniqueKey, this.getCurrentSize(), this.hasInitial);\n      }\n    }\n  }; // wrapping for item\n\n  var Item = Vue.component('virtual-list-item', {\n    mixins: [Wrapper],\n    props: ItemProps,\n    render: function render(h) {\n      var tag = this.tag,\n          component = this.component,\n          _this$extraProps = this.extraProps,\n          extraProps = _this$extraProps === void 0 ? {} : _this$extraProps,\n          index = this.index;\n      extraProps.source = this.source;\n      extraProps.index = index;\n      return h(tag, {\n        role: 'item'\n      }, [h(component, {\n        props: extraProps\n      })]);\n    }\n  }); // wrapping for slot\n\n  var Slot = Vue.component('virtual-list-slot', {\n    mixins: [Wrapper],\n    props: SlotProps,\n    render: function render(h) {\n      var tag = this.tag,\n          uniqueKey = this.uniqueKey;\n      return h(tag, {\n        attrs: {\n          role: uniqueKey\n        }\n      }, this.$slots[\"default\"]);\n    }\n  });\n\n  /**\n   * virtual list default component\n   */\n  var EVENT_TYPE = {\n    ITEM: 'item_resize',\n    SLOT: 'slot_resize'\n  };\n  var SLOT_TYPE = {\n    HEADER: 'header',\n    // string value also use for aria role attribute\n    FOOTER: 'footer'\n  };\n  var VirtualList = Vue.component('virtual-list', {\n    props: VirtualProps,\n    data: function data() {\n      return {\n        range: null\n      };\n    },\n    watch: {\n      'dataSources.length': function dataSourcesLength() {\n        this.virtual.updateParam('uniqueIds', this.getUniqueIdFromDataSources());\n        this.virtual.handleDataSourcesChange();\n      },\n      start: function start(newValue) {\n        this.scrollToIndex(newValue);\n      },\n      offset: function offset(newValue) {\n        this.scrollToOffset(newValue);\n      }\n    },\n    created: function created() {\n      this.isHorizontal = this.direction === 'horizontal';\n      this.directionKey = this.isHorizontal ? 'scrollLeft' : 'scrollTop';\n      this.installVirtual(); // listen item size change\n\n      this.$on(EVENT_TYPE.ITEM, this.onItemResized); // listen slot size change\n\n      if (this.$slots.header || this.$slots.footer) {\n        this.$on(EVENT_TYPE.SLOT, this.onSlotResized);\n      }\n    },\n    // set back offset when awake from keep-alive\n    activated: function activated() {\n      this.scrollToOffset(this.virtual.offset);\n    },\n    mounted: function mounted() {\n      // set position\n      if (this.start) {\n        this.scrollToIndex(this.start);\n      } else if (this.offset) {\n        this.scrollToOffset(this.offset);\n      }\n    },\n    beforeDestroy: function beforeDestroy() {\n      this.virtual.destroy();\n    },\n    methods: {\n      // get item size by id\n      getSize: function getSize(id) {\n        return this.virtual.sizes.get(id);\n      },\n      // get the total number of stored (rendered) items\n      getSizes: function getSizes() {\n        return this.virtual.sizes.size;\n      },\n      // set current scroll position to a expectant offset\n      scrollToOffset: function scrollToOffset(offset) {\n        var root = this.$refs.root;\n\n        if (root) {\n          root[this.directionKey] = offset || 0;\n        }\n      },\n      // set current scroll position to a expectant index\n      scrollToIndex: function scrollToIndex(index) {\n        // scroll to bottom\n        if (index >= this.dataSources.length - 1) {\n          this.scrollToBottom();\n        } else {\n          var offset = this.virtual.getOffset(index);\n          this.scrollToOffset(offset);\n        }\n      },\n      // set current scroll position to bottom\n      scrollToBottom: function scrollToBottom() {\n        var _this = this;\n\n        var shepherd = this.$refs.shepherd;\n\n        if (shepherd) {\n          shepherd.scrollIntoView(false); // check if it's really scrolled to the bottom\n          // maybe list doesn't render and calculate to last range\n          // so we need retry in next event loop until it really at bottom\n\n          setTimeout(function () {\n            if (_this.getOffset() + _this.getClientSize() < _this.getScrollSize()) {\n              _this.scrollToBottom();\n            }\n          }, 3);\n        }\n      },\n      // reset all state back to initial\n      reset: function reset() {\n        this.virtual.destroy();\n        this.scrollToOffset(0);\n        this.installVirtual();\n      },\n      // ----------- public method end -----------\n      installVirtual: function installVirtual() {\n        this.virtual = new Virtual({\n          size: this.size,\n          // also could be a estimate value\n          slotHeaderSize: 0,\n          slotFooterSize: 0,\n          keeps: this.keeps,\n          buffer: Math.round(this.keeps / 3),\n          // recommend for a third of keeps\n          uniqueIds: this.getUniqueIdFromDataSources()\n        }, this.onRangeChanged); // sync initial range\n\n        this.range = this.virtual.getRange();\n      },\n      getUniqueIdFromDataSources: function getUniqueIdFromDataSources() {\n        var _this2 = this;\n\n        return this.dataSources.map(function (dataSource) {\n          return dataSource[_this2.dataKey];\n        });\n      },\n      // return current scroll offset\n      getOffset: function getOffset() {\n        var root = this.$refs.root;\n        return root ? Math.ceil(root[this.directionKey]) : 0;\n      },\n      // return client viewport size\n      getClientSize: function getClientSize() {\n        var root = this.$refs.root;\n        return root ? root[this.isHorizontal ? 'clientWidth' : 'clientHeight'] : 0;\n      },\n      // return all scroll size\n      getScrollSize: function getScrollSize() {\n        var root = this.$refs.root;\n        return root ? root[this.isHorizontal ? 'scrollWidth' : 'scrollHeight'] : 0;\n      },\n      // event called when each item mounted or size changed\n      onItemResized: function onItemResized(id, size) {\n        this.virtual.saveSize(id, size);\n        this.$emit('resized', id, size);\n      },\n      // event called when slot mounted or size changed\n      onSlotResized: function onSlotResized(type, size, hasInit) {\n        if (type === SLOT_TYPE.HEADER) {\n          this.virtual.updateParam('slotHeaderSize', size);\n        } else if (type === SLOT_TYPE.FOOTER) {\n          this.virtual.updateParam('slotFooterSize', size);\n        }\n\n        if (hasInit) {\n          this.virtual.handleSlotSizeChange();\n        }\n      },\n      // here is the rerendering entry\n      onRangeChanged: function onRangeChanged(range) {\n        this.range = range;\n      },\n      onScroll: function onScroll(evt) {\n        var offset = this.getOffset();\n        var clientSize = this.getClientSize();\n        var scrollSize = this.getScrollSize(); // \biOS scroll-spring-back behavior will make direction mistake\n\n        if (offset < 0 || offset + clientSize > scrollSize || !scrollSize) {\n          return;\n        }\n\n        this.virtual.handleScroll(offset);\n        this.emitEvent(offset, clientSize, scrollSize, evt);\n      },\n      // emit event in special position\n      emitEvent: function emitEvent(offset, clientSize, scrollSize, evt) {\n        this.$emit('scroll', evt, this.virtual.getRange());\n\n        if (this.virtual.isFront() && !!this.dataSources.length && offset - this.topThreshold <= 0) {\n          this.$emit('totop');\n        } else if (this.virtual.isBehind() && offset + clientSize + this.bottomThreshold >= scrollSize) {\n          this.$emit('tobottom');\n        }\n      },\n      // get the real render slots based on range data\n      // in-place patch strategy will try to reuse components as possible\n      // so those components that are reused will not trigger lifecycle mounted\n      getRenderSlots: function getRenderSlots(h) {\n        var slots = [];\n        var _this$range = this.range,\n            start = _this$range.start,\n            end = _this$range.end;\n        var dataSources = this.dataSources,\n            dataKey = this.dataKey,\n            itemClass = this.itemClass,\n            itemTag = this.itemTag,\n            isHorizontal = this.isHorizontal,\n            extraProps = this.extraProps,\n            dataComponent = this.dataComponent;\n\n        for (var index = start; index <= end; index++) {\n          var dataSource = dataSources[index];\n\n          if (dataSource) {\n            if (dataSource[dataKey]) {\n              slots.push(h(Item, {\n                props: {\n                  index: index,\n                  tag: itemTag,\n                  event: EVENT_TYPE.ITEM,\n                  horizontal: isHorizontal,\n                  uniqueKey: dataSource[dataKey],\n                  source: dataSource,\n                  extraProps: extraProps,\n                  component: dataComponent\n                },\n                \"class\": \"\".concat(itemClass, \" \").concat(this.itemClassAdd ? this.itemClassAdd(index) : '')\n              }));\n            } else {\n              console.warn(\"Cannot get the data-key '\".concat(dataKey, \"' from data-sources.\"));\n            }\n          } else {\n            console.warn(\"Cannot get the index '\".concat(index, \"' from data-sources.\"));\n          }\n        }\n\n        return slots;\n      }\n    },\n    // render function, a closer-to-the-compiler alternative to templates\n    // https://vuejs.org/v2/guide/render-function.html#The-Data-Object-In-Depth\n    render: function render(h) {\n      var _this$$slots = this.$slots,\n          header = _this$$slots.header,\n          footer = _this$$slots.footer;\n      var _this$range2 = this.range,\n          padFront = _this$range2.padFront,\n          padBehind = _this$range2.padBehind;\n      var rootTag = this.rootTag,\n          headerClass = this.headerClass,\n          headerTag = this.headerTag,\n          wrapTag = this.wrapTag,\n          wrapClass = this.wrapClass,\n          footerClass = this.footerClass,\n          footerTag = this.footerTag;\n      var padding = this.isHorizontal ? \"0px \".concat(padBehind, \"px 0px \").concat(padFront, \"px\") : \"\".concat(padFront, \"px 0px \").concat(padBehind, \"px\");\n      return h(rootTag, {\n        ref: 'root',\n        on: {\n          '&scroll': this.onScroll\n        }\n      }, [// header slot\n      header ? h(Slot, {\n        \"class\": headerClass,\n        props: {\n          tag: headerTag,\n          event: EVENT_TYPE.SLOT,\n          uniqueKey: SLOT_TYPE.HEADER\n        }\n      }, header) : null, // main list\n      h(wrapTag, {\n        \"class\": wrapClass,\n        attrs: {\n          role: 'group'\n        },\n        style: {\n          padding: padding\n        }\n      }, this.getRenderSlots(h)), // footer slot\n      footer ? h(Slot, {\n        \"class\": footerClass,\n        props: {\n          tag: footerTag,\n          event: EVENT_TYPE.SLOT,\n          uniqueKey: SLOT_TYPE.FOOTER\n        }\n      }, footer) : null, // an empty element use to scroll to bottom\n      h('div', {\n        ref: 'shepherd'\n      })]);\n    }\n  });\n\n  return VirtualList;\n\n})));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-virtual-scroll-list/dist/index.js\n// module id = A7yg\n// module chunks = 3","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/get-iterator.js\n// module id = BO1k\n// module chunks = 3","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/get-iterator.js\n// module id = fxRn\n// module chunks = 3","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator.js\n// module id = g8Ux\n// module chunks = 3","<template lang=\"pug\">\r\n  .im-dialog(:class=\"{active, push}\")\r\n    router-link.im-dailog__pic(:to=\"{name: 'ProfileId', params: {id: info.recipient_id.id}}\")\r\n      img(:src=\"info.recipient_id.photo\" :alt=\"info.recipient_id.first_name\")\r\n    .im-dialog__info\r\n      router-link.im-dialog__name(:to=\"{name: 'ProfileId', params: {id: info.recipient_id.id}}\") {{info.recipient_id.first_name + ' ' + info.recipient_id.last_name}}\r\n      span.user-status(:class=\"{online}\") {{statusText}}\r\n    .im-dialog__content\r\n      p.im-dialog__last\r\n        span.im-dialog__last-me(v-if=\"me && info.last_message\") Вы:\r\n        | {{info.last_message.message_text}}\r\n      span.im-dialog__time(v-if=\"me && info.last_message\") {{info.last_message.time - 60*60*3 | moment('from')}}\r\n    span.im-dialog__push(v-if=\"push > 0\") {{push}}\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\nexport default {\r\n  name: 'ImDialog',\r\n  props: {\r\n    active: Boolean,\r\n    push: Number,\r\n    online: Boolean,\r\n    me: Boolean,\r\n    info: Object\r\n  },\r\n  computed: {\r\n    statusText() {\r\n      return this.online\r\n        ? this.$t('online')\r\n        : this.$t('was') + moment(this.info.recipient_id.last_online_time).fromNow()\r\n    }\r\n  },\r\n  created() {\r\n    console.log(this.info.last_message)\r\n  },\r\n  i18n: {\r\n    messages: {\r\n      en: {\r\n        online: 'Online',\r\n        was: 'was online '\r\n      },\r\n      ru: {\r\n        online: 'Онлайн',\r\n        was: 'был в сети '\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n@import '../../assets/stylus/base/vars.styl';\r\n\r\n.im-dialog {\r\n  display: flex;\r\n  align-items: center;\r\n  height: 100px;\r\n  position: relative;\r\n  padding: 0 6.38%;\r\n  z-index: 1;\r\n  cursor: pointer;\r\n  &:hover {\r\n    background-color: #c1c1c1;\r\n  }\r\n\r\n  &:before {\r\n    content: '';\r\n    display: none;\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    background-color: #F8FAFD;\r\n    z-index: -1;\r\n  }\r\n\r\n  &:after {\r\n    content: '';\r\n    display: block;\r\n    height: 1px;\r\n    width: 87.24%;\r\n    background-color: #E3E8EE;\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n  }\r\n\r\n  &.push + &.active, &.active + &.push {\r\n    &:after {\r\n      display: none;\r\n    }\r\n  }\r\n\r\n  &.active {\r\n    &:after {\r\n      display: none;\r\n    }\r\n\r\n    &:before {\r\n      display: block;\r\n    }\r\n  }\r\n\r\n  &.push {\r\n    &:after {\r\n      display: none;\r\n    }\r\n\r\n    &:before {\r\n      display: block;\r\n      background-color: #E9F5EF;\r\n    }\r\n\r\n    .im-dialog__content {\r\n      max-width: 30%;\r\n    }\r\n\r\n    .im-dialog__time {\r\n      color: #7D9A8B;\r\n    }\r\n  }\r\n}\r\n\r\n.im-dailog__pic {\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  margin-right: 15px;\r\n  flex: none;\r\n}\r\n\r\n.im-dialog__info {\r\n  width: 100%;\r\n  max-width: 27.11%;\r\n  min-width: 150px;\r\n  margin-right: 30px;\r\n\r\n  @media (max-width: breakpoint-xl) {\r\n    display: none;\r\n  }\r\n}\r\n\r\n.im-dialog__name {\r\n  font-size: 15px;\r\n  line-height: 22px;\r\n  color: steel-gray;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.im-dialog__content {\r\n  max-width: 37%;\r\n\r\n  @media (max-width: breakpoint-xl) {\r\n    display: none;\r\n  }\r\n}\r\n\r\n.im-dialog__last {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-size: 13px;\r\n  line-height: 18px;\r\n  letter-spacing: -0.003em;\r\n\r\n  &-me {\r\n    color: eucalypt;\r\n  }\r\n}\r\n\r\n.im-dialog__time {\r\n  color: #A4A4B8;\r\n  font-size: 13px;\r\n  line-height: 19px;\r\n}\r\n\r\n.im-dialog__push {\r\n  width: 27px;\r\n  height: 27px;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 15px;\r\n  line-height: 27px;\r\n  font-weight: 600;\r\n  color: #fff;\r\n  background-color: #E65151;\r\n  margin-left: auto;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Im/Dialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"im-dialog\",class:{active: _vm.active, push: _vm.push}},[_c('router-link',{staticClass:\"im-dailog__pic\",attrs:{\"to\":{name: 'ProfileId', params: {id: _vm.info.recipient_id.id}}}},[_c('img',{attrs:{\"src\":_vm.info.recipient_id.photo,\"alt\":_vm.info.recipient_id.first_name}})]),_c('div',{staticClass:\"im-dialog__info\"},[_c('router-link',{staticClass:\"im-dialog__name\",attrs:{\"to\":{name: 'ProfileId', params: {id: _vm.info.recipient_id.id}}}},[_vm._v(_vm._s(_vm.info.recipient_id.first_name + ' ' + _vm.info.recipient_id.last_name))]),_c('span',{staticClass:\"user-status\",class:{online: _vm.online}},[_vm._v(_vm._s(_vm.statusText))])],1),_c('div',{staticClass:\"im-dialog__content\"},[_c('p',{staticClass:\"im-dialog__last\"},[(_vm.me && _vm.info.last_message)?_c('span',{staticClass:\"im-dialog__last-me\"},[_vm._v(\"Вы:\")]):_vm._e(),_vm._v(_vm._s(_vm.info.last_message.message_text))]),(_vm.me && _vm.info.last_message)?_c('span',{staticClass:\"im-dialog__time\"},[_vm._v(_vm._s(_vm._f(\"moment\")(_vm.info.last_message.time - 60*60*3,'from')))]):_vm._e()]),(_vm.push > 0)?_c('span',{staticClass:\"im-dialog__push\"},[_vm._v(_vm._s(_vm.push))]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-34113c68\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Im/Dialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-34113c68\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Dialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Dialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Dialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-34113c68\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Dialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Im/Dialog.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\r\n  // Please avoid to use margin between messages block\r\n  // or it will glitter on scroll\r\n  h5.im-chat__message-title(v-if='source.stubDate') {{source.date | moment('DD MMMM YYYY')}}\r\n  .im-chat__message-block(v-else :class=\"{me: source.sendByMe}\")\r\n      p.im-chat__message-text {{source.message_text}}\r\n      span.im-chat__message-time {{source.time | moment('YYYY-MM-DD hh:mm')}}\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\n\r\nexport default {\r\n  name: 'infinite-loading-item',\r\n  props: {\r\n    source: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '../../assets/stylus/base/vars.styl';\r\n\r\n\r\n.im-chat__message-day {\r\n  &+& {\r\n    margin-top: 50px;\r\n  }\r\n}\r\n\r\n.im-chat__message-title {\r\n  color: #8A94A4;\r\n  font-size: 15px;\r\n  display: block;\r\n  width: 100%;\r\n}\r\n\r\n.im-chat__message-block {\r\n  display: flex;\r\n  flex-direction: column !important;\r\n  max-width: 460px;\r\n\r\n  &:_me{\r\n      align-items: start;\r\n  }\r\n\r\n  &:_interlocutor{\r\n    align-items: end;\r\n  }\r\n\r\n  &+& {\r\n    margin-top: 20px;\r\n  }\r\n\r\n  &.me + & {\r\n    margin-top: 30px;\r\n  }\r\n\r\n  &.me {\r\n    flex-direction: row-reverse;\r\n    max-width: 450px;\r\n    margin-left: auto;\r\n\r\n    .im-chat__message-text {\r\n      display: inline;\r\n      background-color: eucalypt;\r\n      color: #fff;\r\n      box-shadow: 0px 4px 15px #D4E8DD;\r\n      margin-left: auto !important;\r\n      margin-right: 0;\r\n      text-align: end;\r\n    }\r\n\r\n    .im-chat__message-time {\r\n      margin-top: 5px;\r\n      margin-left: auto !important;\r\n    }\r\n  }\r\n}\r\n\r\n.im-chat__message-text {\r\n  background-color: #FFFFFF;\r\n  box-shadow: 0px 4px 15px #EFF1F6;\r\n  border-radius: 20px;\r\n  padding: 15px 20px;\r\n  color: steel-gray;\r\n  font-size: 15px;\r\n  line-height: 23px;\r\n  margin-right: auto;\r\n}\r\n\r\n.im-chat__message-time {\r\n              margin-top: 5px;\r\n  font-size: 13px;\r\n  color: #BAC3D0;\r\n  margin-left: 15px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Im/ChatMessage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.source.stubDate)?_c('h5',{staticClass:\"im-chat__message-title\"},[_vm._v(_vm._s(_vm._f(\"moment\")(_vm.source.date,'DD MMMM YYYY')))]):_c('div',{staticClass:\"im-chat__message-block\",class:{me: _vm.source.sendByMe}},[_c('p',{staticClass:\"im-chat__message-text\"},[_vm._v(_vm._s(_vm.source.message_text))]),_c('span',{staticClass:\"im-chat__message-time\"},[_vm._v(_vm._s(_vm._f(\"moment\")(_vm.source.time,'YYYY-MM-DD hh:mm')))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0aaee62f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Im/ChatMessage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0aaee62f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChatMessage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatMessage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatMessage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0aaee62f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChatMessage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0aaee62f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Im/ChatMessage.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\r\n  .im-chat\r\n    .im-chat__user\r\n      router-link.im-chat__user-pic(:to=\"{name: 'ProfileId', params: {id: info.recipient_id.id}}\")\r\n        img(:src=\"info.recipient_id.photo\" :alt=\"info.recipient_id.first_name\")\r\n      router-link.im-chat__user-name(:to=\"{name: 'ProfileId', params: {id: info.recipient_id.id}}\") {{info.recipient_id.first_name + ' ' + info.recipient_id.last_name}}\r\n      span.user-status(:class=\"{online}\") {{statusText}}\r\n    .im-chat__infitite_list_wrapper\r\n      virtual-list.im-chat__infitite_list.scroll-touch(:size=\"60\"\r\n        :keeps=\"120\"\r\n        :data-key=\"'sid'\"\r\n        :data-sources=\"messagesGrouped\"\r\n        :data-component=\"itemComponent\"\r\n        :wrap-class=\"'im-chat__message'\"\r\n        :root-tag=\"'section'\"\r\n        @totop=\"onScrollToTop\"\r\n        @scroll.passive=\"onScroll\"\r\n        @tobottom=\"onScrollToBottom\"\r\n        ref=\"vsl\"\r\n      )\r\n        .im-chat__loader(slot=\"header\", v-show=\"fetching\")\r\n          .spinner(v-show=\"!isHistoryEndReached()\")\r\n          .finished(v-show=\"isHistoryEndReached()\") {{ $t('nomore') }}\r\n    form.im-chat__enter(action=\"#\" @submit.prevent=\"onSubmitMessage\")\r\n      input.im-chat__enter-input(type=\"text\" :placeholder=\"$t('placeholder')\" v-model=\"mes\")\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\nimport { mapActions, mapGetters } from 'vuex'\r\nimport ChatMessage from '@/components/Im/ChatMessage'\r\nimport VirtualList from 'vue-virtual-scroll-list'\r\n\r\nconst makeHeader = msgDate => {\r\n  return { sid: `group-${msgDate}`, stubDate: true, date: msgDate }\r\n}\r\nexport default {\r\n  name: 'ImChat',\r\n  props: {\r\n    info: Object,\r\n    messages: Array,\r\n    online: Boolean\r\n  },\r\n  components: { VirtualList },\r\n  data: () => ({\r\n    mes: '',\r\n    itemComponent: ChatMessage,\r\n    isUserViewHistory: false,\r\n    fetching: false\r\n  }),\r\n  mounted() {\r\n    this.follow = true\r\n  },\r\n  watch: {\r\n    messages() {\r\n      if (this.follow) this.setVirtualListToBottom()\r\n    }\r\n  },\r\n  computed: {\r\n    statusText() {\r\n      return this.online\r\n        ? this.$t('online')\r\n        : this.$t('was') + moment(this.info.recipient_id.last_online_time).fromNow()\r\n    },\r\n    messagesGrouped() {\r\n      let groups = []\r\n      let headerDate = null\r\n\r\n      for (const msg of this.messages) {\r\n        let msgDate = moment(msg.time).format('YYYY-MM-DD')\r\n        if (msgDate !== headerDate) {\r\n          headerDate = msgDate\r\n          groups.push(makeHeader(headerDate))\r\n        }\r\n        groups.push(msg)\r\n      }\r\n      return groups\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions('profile/dialogs', ['postMessage', 'loadOlderMessages']),\r\n    ...mapGetters('profile/dialogs', ['isHistoryEndReached']),\r\n    onSubmitMessage() {\r\n      this.postMessage({ id: this.info.id, message_text: this.mes })\r\n      this.mes = ''\r\n    },\r\n    async onScrollToTop() {\r\n      if (this.$refs.vsl) {\r\n        if (!this.isHistoryEndReached()) {\r\n          let oldest = this.messagesGrouped[0]\r\n\r\n          this.fetching = true\r\n          await this.loadOlderMessages()\r\n          this.setVirtualListToOffset(1)\r\n\r\n          this.$nextTick(() => {\r\n            let offset = 0\r\n            for (const groupedMsg of this.messagesGrouped) {\r\n              if (groupedMsg.sid === oldest.sid) break\r\n              offset += this.$refs.vsl.getSize(groupedMsg.sid)\r\n            }\r\n\r\n            this.setVirtualListToOffset(offset)\r\n            this.fetching = false\r\n          })\r\n        }\r\n      }\r\n    },\r\n    onScroll() {\r\n      this.follow = false\r\n    },\r\n    onScrollToBottom() {\r\n      this.follow = true\r\n    },\r\n    setVirtualListToOffset(offset) {\r\n      if (this.$refs.vsl) {\r\n        this.$refs.vsl.scrollToOffset(offset)\r\n      }\r\n    },\r\n    setVirtualListToBottom() {\r\n      if (this.$refs.vsl) {\r\n        this.$refs.vsl.scrollToBottom()\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    console.log(this.info)\r\n  },\r\n  i18n: {\r\n    messages: {\r\n      en: {\r\n        nomore: 'No more messages',\r\n        placeholder: 'Your message...',\r\n        online: 'Online',\r\n        was: 'was online '\r\n      },\r\n      ru: {\r\n        nomore: 'Больше сообщений нет',\r\n        placeholder: 'Ваше сообщение...',\r\n        online: 'Онлайн',\r\n        was: 'был в сети '\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n@import '../../assets/stylus/base/vars.styl';\r\n\r\n.im-chat {\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n\r\n.im-chat__user {\r\n  border-bottom: 1px solid #E3E8EE;\r\n  display: flex;\r\n  align-items: center;\r\n  height: 60px;\r\n  padding: 30px 20px;\r\n  font-size: 13px;\r\n  background-color: #F8FAFD;\r\n}\r\n\r\n.im-chat__user-pic {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  margin-right: 10px;\r\n}\r\n\r\n.im-chat__user-name {\r\n  font-weight: 600;\r\n  color: steel-gray;\r\n  margin-right: auto;\r\n}\r\n\r\n.im-chat__user-status {\r\n  color: #9EA4AD;\r\n\r\n  &.online {\r\n    color: eucalypt;\r\n  }\r\n}\r\n\r\n.im-chat__infitite_list_wrapper {\r\n  position: relative;\r\n  flex: 1;\r\n}\r\n\r\n.im-chat__infitite_list {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  overflow-y: auto;\r\n}\r\n\r\n.im-chat__message > div {\r\n  padding-left: 30px;\r\n  padding-right: 30px;\r\n  padding: 20px;\r\n}\r\n\r\n.im-chat__enter {\r\n  display: block;\r\n  width: 100%;\r\n}\r\n\r\n.im-chat__enter-input {\r\n  width: 100%;\r\n  background-color: #fff;\r\n  padding: 0 40px;\r\n  font-size: 15px;\r\n  color: steel-gray;\r\n  height: 60px;\r\n\r\n  &::placeholder {\r\n    color: #B0B0BC;\r\n  }\r\n}\r\n\r\n\r\n.im-chat__loader {\r\n  padding: 1em;\r\n  .finished {\r\n    font-size: 14px;\r\n    text-align: center;\r\n    color: #bfbfbf;\r\n  }\r\n  .spinner {\r\n    font-size: 10px;\r\n    margin: 0px auto;\r\n    text-indent: -9999em;\r\n    width: 25px;\r\n    height: 25px;\r\n    border-radius: 50%;\r\n    background: #ffffff;\r\n    background: linear-gradient(to right, eucalypt 10%, rgba(255, 255, 255, 0) 42%);\r\n    position: relative;\r\n    animation: load3 1.4s infinite linear;\r\n    transform: translateZ(0);\r\n  }\r\n  .spinner:before {\r\n    width: 50%;\r\n    height: 50%;\r\n    background: eucalypt;\r\n    border-radius: 100% 0 0 0;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    content: '';\r\n  }\r\n  .spinner:after {\r\n    background: #f8fafd;\r\n    width: 75%;\r\n    height: 75%;\r\n    border-radius: 50%;\r\n    content: '';\r\n    margin: auto;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    bottom: 0;\r\n    right: 0;\r\n  }\r\n  @-webkit-keyframes load3 {\r\n    0% {\r\n      transform: rotate(0deg);\r\n    }\r\n    100% {\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n  @keyframes load3 {\r\n    0% {\r\n      transform: rotate(0deg);\r\n    }\r\n    100% {\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Im/Chat.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"im-chat\"},[_c('div',{staticClass:\"im-chat__user\"},[_c('router-link',{staticClass:\"im-chat__user-pic\",attrs:{\"to\":{name: 'ProfileId', params: {id: _vm.info.recipient_id.id}}}},[_c('img',{attrs:{\"src\":_vm.info.recipient_id.photo,\"alt\":_vm.info.recipient_id.first_name}})]),_c('router-link',{staticClass:\"im-chat__user-name\",attrs:{\"to\":{name: 'ProfileId', params: {id: _vm.info.recipient_id.id}}}},[_vm._v(_vm._s(_vm.info.recipient_id.first_name + ' ' + _vm.info.recipient_id.last_name))]),_c('span',{staticClass:\"user-status\",class:{online: _vm.online}},[_vm._v(_vm._s(_vm.statusText))])],1),_c('div',{staticClass:\"im-chat__infitite_list_wrapper\"},[_c('virtual-list',{ref:\"vsl\",staticClass:\"im-chat__infitite_list scroll-touch\",attrs:{\"size\":60,\"keeps\":120,\"data-key\":'sid',\"data-sources\":_vm.messagesGrouped,\"data-component\":_vm.itemComponent,\"wrap-class\":'im-chat__message',\"root-tag\":'section'},on:{\"totop\":_vm.onScrollToTop,\"&scroll\":function($event){return _vm.onScroll($event)},\"tobottom\":_vm.onScrollToBottom}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.fetching),expression:\"fetching\"}],staticClass:\"im-chat__loader\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isHistoryEndReached()),expression:\"!isHistoryEndReached()\"}],staticClass:\"spinner\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isHistoryEndReached()),expression:\"isHistoryEndReached()\"}],staticClass:\"finished\"},[_vm._v(_vm._s(_vm.$t('nomore')))])])])],1),_c('form',{staticClass:\"im-chat__enter\",attrs:{\"action\":\"#\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmitMessage($event)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mes),expression:\"mes\"}],staticClass:\"im-chat__enter-input\",attrs:{\"type\":\"text\",\"placeholder\":_vm.$t('placeholder')},domProps:{\"value\":(_vm.mes)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.mes=$event.target.value}}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0a902e74\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Im/Chat.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0a902e74\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Chat.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chat.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chat.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0a902e74\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Chat.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Im/Chat.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\r\n.im\r\n    .im__dialogs\r\n        im-dialog(\r\n            v-for='dialog in getDialogs',\r\n            :key='dialog.id',\r\n            :info='dialog',\r\n            :push='countPush(dialog.unread_count)',\r\n            :me='dialog.sendByMe',\r\n            :active='getActiveDialog && dialog.id === getActiveDialog.id',\r\n            :online='checkOnlineUser(dialog.recipient_id.last_online_time)',\r\n            @click.native='clickOnDialog(dialog.id)'\r\n        )\r\n\r\n        is-loading(v-if=\"total > offset\" :isLoad='isLoad', v-load=\"loadFeeds\")\r\n    .im__chat(v-if='getActiveDialog')\r\n        im-chat(\r\n            :info='getActiveDialog',\r\n            :messages='getMessages',\r\n            :online='checkOnlineUser(getActiveDialog.recipient_id.last_online_time)'\r\n        )\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport ImDialog from '@/components/Im/Dialog'\r\nimport ImChat from '@/components/Im/Chat'\r\nimport isLoading from '@/components/isLoading'\r\n\r\nexport default {\r\n  name: 'Im',\r\n  components: { ImDialog, ImChat, isLoading },\r\n  data: () => ({\r\n    intervalForMessages: null,\r\n    total: 0,\r\n    offset: 0,\r\n    isLoad: false\r\n  }),\r\n\r\n  computed: {\r\n    ...mapGetters('profile/dialogs', ['getMessages', 'getActiveDialog', 'getDialogs'])\r\n  },\r\n  methods: {\r\n    ...mapActions('profile/dialogs', [\r\n      'loadFreshMessages',\r\n      'switchDialog',\r\n      'closeDialog',\r\n      'createDialogWithUser',\r\n      'apiLoadAllDialogs'\r\n    ]),\r\n    countPush(unread) {\r\n      return unread > 0 ? unread : null\r\n    },\r\n    checkOnlineUser(time) {\r\n      return moment().diff(moment(time), 'seconds') <= 60\r\n    },\r\n    clickOnDialog(dialogId) {\r\n      this.$router.push({ name: 'Im', query: { getActiveDialog: dialogId } })\r\n    },\r\n    async selectDialogByRoute(route, vm) {\r\n      if (route.query.getActiveDialog) {\r\n        vm.switchDialog(route.query.getActiveDialog)\r\n      } else if (route.query.userId) {\r\n        vm.createDialogWithUser(route.query.userId)\r\n      } else if (vm.getDialogs.length > 0) {\r\n        vm.$router.push({ name: 'Im', query: { getActiveDialog: vm.getDialogs[0].id } })\r\n      } else {\r\n        await vm.apiLoadAllDialogs().then(resp => {\r\n          this.offset = resp\r\n        })\r\n        if (vm.getDialogs.length > 0) {\r\n          vm.$router.push({ name: 'Im', query: { getActiveDialog: vm.getDialogs[0].id } })\r\n        }\r\n        console.log('No dialogs at all')\r\n      }\r\n    },\r\n\r\n    loadDialogs() {}\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    next(async vm => {\r\n      vm.selectDialogByRoute(to, vm)\r\n    })\r\n  },\r\n  beforeRouteUpdate(to, from, next) {\r\n    this.selectDialogByRoute(to, this)\r\n    next()\r\n  },\r\n  beforeDestroy() {\r\n    this.closeDialog()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n@import '../../assets/stylus/base/vars.styl';\r\n\r\n.im {\r\n    display: flex;\r\n    height: 'calc(100vh - %s)' % header-height;\r\n}\r\n\r\n.im__dialogs {\r\n    width: 100%;\r\n    max-width: 39.13%;\r\n    overflow-y: auto;\r\n    max-height: 100%;\r\n    height: 100%;\r\n    background-color: #F2F5F9;\r\n\r\n    @media (max-width: breakpoint-xl) {\r\n        max-width: 120px;\r\n    }\r\n}\r\n\r\n.im__chat {\r\n    width: 100%;\r\n    flex: auto;\r\n    height: 100%;\r\n    background-color: #F8FAFD;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/User/Im.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"im\"},[_c('div',{staticClass:\"im__dialogs\"},[_vm._l((_vm.getDialogs),function(dialog){return _c('im-dialog',{key:dialog.id,attrs:{\"info\":dialog,\"push\":_vm.countPush(dialog.unread_count),\"me\":dialog.sendByMe,\"active\":_vm.getActiveDialog && dialog.id === _vm.getActiveDialog.id,\"online\":_vm.checkOnlineUser(dialog.recipient_id.last_online_time)},nativeOn:{\"click\":function($event){return _vm.clickOnDialog(dialog.id)}}})}),(_vm.total > _vm.offset)?_c('is-loading',{directives:[{name:\"load\",rawName:\"v-load\",value:(_vm.loadFeeds),expression:\"loadFeeds\"}],attrs:{\"isLoad\":_vm.isLoad}}):_vm._e()],2),(_vm.getActiveDialog)?_c('div',{staticClass:\"im__chat\"},[_c('im-chat',{attrs:{\"info\":_vm.getActiveDialog,\"messages\":_vm.getMessages,\"online\":_vm.checkOnlineUser(_vm.getActiveDialog.recipient_id.last_online_time)}})],1):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b30e976e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/User/Im.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b30e976e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Im.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Im.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Im.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b30e976e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Im.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/User/Im.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}